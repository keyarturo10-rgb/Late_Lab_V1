<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La-té Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-minimal">
                    <div class="logo-circle"></div>
                    <div class="logo-lines">
                        <div class="line horizontal"></div>
                        <div class="line vertical"></div>
                        <div class="line diagonal-1"></div>
                        <div class="line diagonal-2"></div>
                    </div>
                    <div class="logo-dots">
                        <div class="dot dot-1"></div>
                        <div class="dot dot-2"></div>
                        <div class="dot dot-3"></div>
                    </div>
                </div>
            </div>
            <h1>La-té Lab</h1>
            <p class="subtitle">Laboratorio de café espresso</p>
        </div>
        
        <!-- Estado de GitHub -->
        <div id="github-status" class="github-status">
            <span id="github-status-text">No conectado a GitHub</span>
            <button id="configure-github" class="github-btn">Configurar GitHub</button>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="calculator">
                <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 12h20M4 6h16M4 18h16"></path>
                    <path d="M8 6V3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v3"></path>
                    <path d="M8 18v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3"></path>
                </svg>
                Calculadora
            </div>
            <div class="tab" data-tab="coffee-data">
                <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M17 8h1a4 4 0 1 1 0 8h-1"></path>
                    <path d="M3 8h14v8H3z"></path>
                    <path d="M10 8v8"></path>
                    <path d="M6 8v8"></path>
                </svg>
                Datos Café
            </div>
            <div class="tab" data-tab="sensory">
                <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 4a8 8 0 0 1 7.89 6.7 1.53 1.53 0 0 0 1.49 1.3A1.5 1.5 0 0 1 23 13.5c0 1.93-2.57 3.5-5.5 3.5H4"></path>
                    <path d="M12 4a8 8 0 0 0-7.89 6.7A1.53 1.53 0 0 1 2.62 12 1.5 1.5 0 0 0 1 13.5C1 15.43 3.57 17 6.5 17H20"></path>
                    <path d="M7 13h10"></path>
                    <path d="M7 9h10"></path>
                </svg>
                Evaluación
            </div>
            <div class="tab" data-tab="recipes">
                <svg class="tab-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path>
                    <path d="M8 7h6"></path>
                    <path d="M8 11h8"></path>
                    <path d="M8 15h4"></path>
                </svg>
                Recetas
            </div>
        </div>
        
        <div class="tab-content active" id="calculator">
            <div class="calculator">
                <div class="param-section">
                    <div class="param-header">
                        <div class="param-title">Dosis</div>
                        <div class="param-value" id="dose-value">16.0 g</div>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="10" max="20" value="16" step="0.5" class="slider" id="dose-slider">
                    </div>
                    <div class="slider-labels">
                        <span class="slider-label">10g</span>
                        <span class="slider-label">15g</span>
                        <span class="slider-label">20g</span>
                    </div>
                </div>
                
                <div class="param-section">
                    <div class="param-header">
                        <div class="param-title">Ratio</div>
                        <div class="param-value" id="ratio-value">1:2.0</div>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="15" max="35" value="20" step="1" class="slider" id="ratio-slider">
                    </div>
                    <div class="ratio-labels">
                        <span class="ratio-label">Ristretto<br>1:1.5</span>
                        <span class="ratio-label">Espresso<br>1:2.0</span>
                        <span class="ratio-label">Lungo<br>1:3.5</span>
                    </div>
                </div>
                
                <div class="param-section">
                    <div class="param-header">
                        <div class="param-title">Molienda</div>
                        <div class="param-value" id="grind-value">15 clicks (Media)</div>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="0" max="30" value="15" step="1" class="slider" id="grind-slider">
                    </div>
                    <div class="grind-labels">
                        <span class="grind-label">0<br>Muy Fina</span>
                        <span class="grind-label">8<br>Fina</span>
                        <span class="grind-label">15<br>Media</span>
                        <span class="grind-label">22<br>Gruesa</span>
                        <span class="grind-label">30<br>Muy Gruesa</span>
                    </div>
                </div>
                
                <div class="param-section">
                    <div class="param-header">
                        <div class="param-title">Temperatura</div>
                        <div class="param-value" id="temp-value">92°C</div>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="80" max="100" value="92" step="1" class="slider" id="temp-slider">
                    </div>
                    <div class="slider-labels">
                        <span class="slider-label">80°C</span>
                        <span class="slider-label">90°C</span>
                        <span class="slider-label">100°C</span>
                    </div>
                </div>
                
                <div class="param-section">
                    <div class="param-header">
                        <div class="param-title">Tiempo de extracción</div>
                        <div class="param-value" id="time-value">30 seg</div>
                    </div>
                    <div class="slider-container">
                        <input type="range" min="15" max="45" value="30" step="1" class="slider" id="time-slider">
                    </div>
                    <div class="slider-labels">
                        <span class="slider-label">15s</span>
                        <span class="slider-label">30s</span>
                        <span class="slider-label">45s</span>
                    </div>
                </div>
                
                <div class="result-section">
                    <div class="result-title">Peso en taza</div>
                    <div class="result-value" id="yield-value">32.0</div>
                    <div class="result-unit">gramos</div>
                    <div class="espresso-type" id="espresso-type">Espresso</div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="coffee-data">
            <div class="coffee-specialty">
                <h2 class="section-title">Datos del Café de Especialidad</h2>
                
                <div class="form-group">
                    <label class="form-label">Nombre del Café</label>
                    <input type="text" class="form-input" id="coffee-name" placeholder="Ej: Ethiopia Yirgacheffe">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Variedad</label>
                    <input type="text" class="form-input" id="coffee-variety" placeholder="Ej: Bourbon, Geisha, etc.">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Origen</label>
                    <input type="text" class="form-input" id="coffee-origin" placeholder="Ej: Ethiopia, Colombia, etc.">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Altura de siembra (msnm)</label>
                    <input type="number" class="form-input" id="coffee-altitude" placeholder="Ej: 1800">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Procesamiento</label>
                    <select class="form-select" id="coffee-process">
                        <option value="">Seleccionar...</option>
                        <option value="lavado">Lavado</option>
                        <option value="natural">Natural</option>
                        <option value="honey">Honey</option>
                        <option value="anaerobico">Anaeróbico</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Fecha de tostado</label>
                    <input type="date" class="form-input" id="roast-date">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Tipo de tostado</label>
                    <select class="form-select" id="roast-type">
                        <option value="">Seleccionar...</option>
                        <option value="claro">Claro</option>
                        <option value="medio">Medio</option>
                        <option value="medio-oscuro">Medio-Oscuro</option>
                        <option value="oscuro">Oscuro</option>
                    </select>
                </div>
                
                <div class="image-upload">
                    <label for="image-input" class="upload-btn">Cargar imagen de la etiqueta</label>
                    <input type="file" id="image-input" accept="image/*">
                    <div class="image-preview" id="image-preview">
                        <img id="preview-img" src="" alt="Vista previa de la imagen">
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="sensory">
            <div class="sensory-evaluation">
                <h2 class="section-title">Evaluación Sensorial SCA</h2>
                
                <div class="form-group">
                    <label class="form-label">Notas de sabor</label>
                    <textarea class="form-textarea" id="flavor-notes" placeholder="Describe las notas de sabor (ej: frutos rojos, chocolate, cítricos...)"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Dulzor (1-10)</label>
                    <input type="range" min="1" max="10" value="5" class="slider" id="sweetness">
                    <div class="slider-labels">
                        <span class="slider-label">1</span>
                        <span class="slider-label">5</span>
                        <span class="slider-label">10</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Acidez (1-10)</label>
                    <input type="range" min="1" max="10" value="5" class="slider" id="acidity">
                    <div class="slider-labels">
                        <span class="slider-label">1</span>
                        <span class="slider-label">5</span>
                        <span class="slider-label">10</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Cuerpo (1-10)</label>
                    <input type="range" min="1" max="10" value="5" class="slider" id="body">
                    <div class="slider-labels">
                        <span class="slider-label">1</span>
                        <span class="slider-label">5</span>
                        <span class="slider-label">10</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Balance (1-10)</label>
                    <input type="range" min="1" max="10" value="5" class="slider" id="balance">
                    <div class="slider-labels">
                        <span class="slider-label">1</span>
                        <span class="slider-label">5</span>
                        <span class="slider-label">10</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Puntuación general (1-100)</label>
                    <input type="number" class="form-input" id="score" min="1" max="100" value="80">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Comentarios adicionales</label>
                    <textarea class="form-textarea" id="additional-notes" placeholder="Otros comentarios sobre la extracción..."></textarea>
                </div>
                
                <div class="btn-group">
                    <button class="btn btn-primary" id="save-recipe-btn">Guardar Receta Completa</button>
                    <button class="btn btn-secondary" id="generate-pdf-btn">Generar PDF</button>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="recipes">
            <div class="recipes-db">
                <h2 class="section-title">Mis Recetas Guardadas</h2>
                
                <!-- Botón para eliminar todas las recetas -->
                <div class="danger-zone">
                    <button id="delete-all-recipes" class="btn btn-danger">Eliminar Todas las Recetas</button>
                    <p class="danger-warning">⚠️ Esta acción no se puede deshacer</p>
                </div>
                
                <div id="recipes-list">
                    <div class="no-recipes">
                        <p>No hay recetas guardadas todavía.</p>
                        <p>Usa la calculadora y guarda tu primera receta.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            Diseñado específicamente para Flair Classic • 2025
        </div>
    </div>

    <!-- Modal para configuración de GitHub -->
    <div id="github-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Configuración de GitHub</h2>
            <p>Para guardar tus recetas en GitHub, necesitas configurar un token de acceso personal.</p>
            
            <div class="form-group">
                <label class="form-label">Token de acceso personal</label>
                <input type="password" class="form-input" id="github-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx">
            </div>
            
            <div class="form-group">
                <label class="form-label">Nombre de usuario de GitHub</label>
                <input type="text" class="form-input" id="github-username" value="keyarturo10-rgb">
            </div>
            
            <div class="form-group">
                <label class="form-label">Repositorio</label>
                <input type="text" class="form-input" id="github-repo" value="Late_Lab_V1">
            </div>
            
            <div class="form-group">
                <label class="form-label">Archivo de datos</label>
                <input type="text" class="form-input" id="github-file" value="recipes.json">
            </div>
            
            <button id="save-github-config" class="btn btn-primary">Guardar configuración</button>
            
            <div class="github-help">
                <h3>¿Cómo obtener un token?</h3>
                <ol>
                    <li>Inicia sesión en tu cuenta de GitHub</li>
                    <li>Ve a Settings > Developer settings > Personal access tokens</li>
                    <li>Haz clic en "Generate new token"</li>
                    <li>Selecciona el alcance "repo" para dar acceso a repositorios</li>
                    <li>Copia el token generado y pégala arriba</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para eliminar recetas -->
    <div id="confirm-modal" class="confirm-modal">
        <div class="confirm-content">
            <h3>¿Estás seguro?</h3>
            <p>Esta acción eliminará todas las recetas permanentemente.</p>
            <p>No podrás recuperarlas.</p>
            <div class="confirm-buttons">
                <button id="confirm-delete" class="confirm-btn confirm-yes">Sí, eliminar todo</button>
                <button id="cancel-delete" class="confirm-btn confirm-no">Cancelar</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
